
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shou's origin</title>
  <meta name="author" content="Shou Ya">

  
  <meta name="description" content="原文 「Backwards State, or: The Power of Laziness」由 Antoine Latter 發佈於其個人Blogger上。特別地，對 Philip Wadler 及其著作的 The Essence of Functional Programming表示至高感謝 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://shouya.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Shou's origin" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!-- <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->
<!--
<link href="/assets/fonts/PT_Sans_Regular.woff"
      rel="stylesheet" type="text/css">
<link href="/assets/fonts/PT_Sans_Bold.woff" rel="stylesheet" type="text/css">
<link href="/assets/fonts/PT_Serif_Regular.woff"
      rel="stylesheet" type="text/css">
<link href="/assets/fonts/PT_Serif_Bold.woff" rel="stylesheet" type="text/css">
-->
<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-33282225-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Shou's origin</a></h1>
  
    <h2>Source of everything</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:shouya.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/page/sicp-notes/">SICP Notes</a></li>
  <li><a href="/about/">About</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/backwards-state-or-the-power-of-laziness/">翻譯：逆向狀態，又：惰性之力</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-04T21:14:35-06:00" pubdate data-updated="true">Mar 4<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>
  <p>原文 「<a href="http://panicsonic.blogspot.jp/2007/12/backwards-state-or-power-of-laziness.html">Backwards State, or: The Power of Laziness</a>」由 Antoine Latter 發佈於其個人<a href="http://panicsonic.blogspot.jp/">Blogger</a>上。特別地，對 Philip Wadler 及其著作的 <a href="http://citeseer.ist.psu.edu/wadler92essence.html">The Essence of Functional Programming</a>表示至高感謝。</p>
</blockquote>

<p>近期我參加了一個關於 Haskell 中自動微分（Automatic Differentiaion）的討論，因為之我拜讀了 Jerzy Karczmarczuk 的論文「<a href="http://users.info.unicaen.fr/~karczma/arpap/revpearl.pdf">Lazy Time Reversal, and Automatic Differentiation</a>」。這篇論文進一步引用了 Philip Wadler 的 <a href="http://citeseer.ist.psu.edu/wadler92essence.html">The Essence of Functional Programming</a> 來介紹<em>逆向</em>（Backward） State Monad，我覺得非常有趣，在此向大家講一下這種技術。</p>

<p>在此我期待讀者各位對 Haskell 的 <a href="http://haskell.org/ghc/docs/latest/html/libraries/mtl-1.1.0.0/Control-Monad-State-Lazy.html">State Monad</a> 已有所了解，其實簡單來說 State Monad 就是一個函數，從上一個狀態映射到結果以及下一個狀態。</p>

<p>逆向 State Monad 和 State Monad 的區別就在於它和 State Monad 執行的順序恰好相反，也就是說，逆向 Monad 是從一個最終狀態執行到其最初狀態並產生一系列值的。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/backwards-state-or-the-power-of-laziness/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/the-abyss/">深淵</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-24T10:06:41-06:00" pubdate data-updated="true">Dec 24<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>站在深淵面前   <br />
驅使自己踏前一步   <br />
恐懼充滿我的內心  <br />
所以我捂著雙眼    </p>

<p>我不斷跌落，跌落  <br />
以至於甚至當我想起抬頭  <br />
向上看一眼時  <br />
已經沒有任何光亮了    </p>

<p>沒有朋友，沒有敵人，沒有人  <br />
我感到恐懼，而又熱愛著她  <br />
我熱愛這黑暗  <br />
我熱愛這未知的周圍  <br />
</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/the-abyss/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/how-lazy-evaluation-works-in-haskell/">翻譯：Haskell 怎麼實現惰性求值</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-11-24T05:14:57-06:00" pubdate data-updated="true">Nov 24<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>
  <p>原文由 <a href="http://apfelmus.nfshost.com/blog.html">Heinrich Apfelmus</a> 發表於 <a href="https://hackhands.com/lazy-evaluation-works-haskell/">Hackhands</a>，標題：How Lazy Evaluatoin Works in Haskell。</p>
</blockquote>

<p><em>Lambda 醬想遲些再去打掃房間～</em></p>

<p>惰性求值是 Haskell 用得最廣泛的代碼執行方法，通過之我們的程序可以寫得更簡單，更模塊化，不過惰性求值帶來的一個問題是不那麼直觀內存佔用，對新手來講這往往是個坑。譬如說，下面這個看起來很正常的表達式跑起來將會佔用上 G 的內存空間：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="haskell"><span class="line"><span class="nf">foldl</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span> <span class="mi">0</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="o">^</span><span class="mi">8</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>在這個教程裡，我想解釋一下惰性求值的實現原理，並講清楚 Haskell 的惰性求值在時間和空間上的佔用情況。我會先講一些關於圖規約（Graph Reduction）基礎，然後討論一下關於嚴格（Strict）的左褶疊（Left Fold），用於幫助理解內存空間洩漏問題並解決之。</p>

<p>惰性求值相關的主題在很多教科書裡都有涉及，譬如 Simon Thompson 的《<a href="http://www.haskellcraft.com/">Haskell – The Craft of Functional Programming</a>》一書，但是線上版本似乎不太容易找。但願這篇教程能夠起到些幫助作用吧。</p>

<p>惰性求值是一個需要權衡的語言特性。一方面，它能使代碼更模塊化。（很遺憾，這次我沒有時間演示這個作用。）另一方面，它使得我們無法完全理解在任一程序中求值的過程 – 它的確比你想像要難一些。在本文末尾，我會提供一些對付這種情況的方法。我們開始吧！</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/how-lazy-evaluation-works-in-haskell/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/function-calling-syntax/">Function Calling Syntax</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-03T04:59:14-05:00" pubdate data-updated="true">Aug 3<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We use programming languages to indicate a process of
actions/computations. Therefore programming languages tends to be more
procedual. In other words, they are used to indicate how a thing is
done.</p>

<p>Just as the role of verbs in a nature language sentence, an action is
the most essential part of ‘doing a task’ in programming language. Of
course the syntax of a programming language could be complex. I’d be
here to discuss only the simplest cases of function calling among
different programming languages.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/function-calling-syntax/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/how-to-be-happy/">翻譯：如何幸福起來</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-28T09:17:07-05:00" pubdate data-updated="true">Jul 28<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>
  <p>原文由 lukeprog 發表於 <a href="http://lesswrong.com/lw/4su/how_to_be_happy/">LessWrong</a>。
關於注釋和引用，請參見原文。</p>
</blockquote>

<p>有一天一個同事對我說：「盧克，你應該是我見過的最幸福的人了！你怎麼做到每時每刻都這麼開心的？」</p>

<p>他可能只是在誇張修辭，不過我還是回答了很長。曾經的大部分人生是不令我開心的，我甚至好幾次考慮過自殺。然後我花了兩年研究幸福科學。而現在，幸福是我的自然狀態。我甚至都不記得甚麼時候我有達 20 分鐘以上的不開心過。</p>

<p>這類改變並非人人都會有，甚至大部份人都不會有（<a href="http://lesswrong.com/lw/9v/beware_of_otheroptimizing/">beware of other-optimizing</a>），但不妨一試！</p>

<p>我們都希望開心些，而且變得開心對其他事情也有好處。譬如說，開心有利於人的身心健康，能提高創造力，還能使你更好地做決定。（畢竟當一個人不開心時很難做到理性思考。）所以呢，本篇作為<a href="http://lesswrong.com/lw/3nn/scientific_selfhelp_the_state_of_our_knowledge/">如何</a>系列的一部分，讓我們回過頭來審視一下<strong>幸福科學</strong>。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/how-to-be-happy/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/dnscrypt-plus-dnsmasq-solution/">Linux 下 GFW 的 DNS 投毒解決方案</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-25T13:27:35-05:00" pubdate data-updated="true">Jul 25<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>這篇日誌紀錄我在 Gentoo Linux 下配置 DNS Crypt + DNSmasq 的過程。</p>

<h2 id="section">方案</h2>

<p>DNSCrypt 是 OpenDNS 推出的一個用來加密 DNS 請求的代理，我用這個來繞開 GFW 的檢查。dnsmasq 是一款的 DNS 服務器，我主要用其提供 DNS 緩存的功能。</p>

<p>我將用 dnsmasq 設置本地的 DNS 服務器，然後配置 dnsmasq 從 dnscrypt 獲得結果並返回給請求者。而 dnscrypt 會把來自 dnsmasq 的請求加密丟到 opendns 的服務器，然後把解析結果返回回來。</p>

<p>那麼 dnsmasq 將偵聽 <code>53</code> 端口，而 dnscrypt 的端口隨意，只要和 dnsmasq 裡的配置匹配就可以了。我隨便用了 <code>1053</code> 作為 dnscrypt 的端口。</p>

<p>最後，把系統的 DNS 服務器設置為本機就可以了。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/dnscrypt-plus-dnsmasq-solution/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/a-brief-journal-about-learning-coq/">A Brief Journal About Learning Coq</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-04T12:08:34-05:00" pubdate data-updated="true">Jul 4<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>This article is completely an informal journal about my learning process on
Coq. It is just created as my whim prompted. Please don’t academically refer
any part of it as studying material to learn Coq.</em></p>

<h2 id="pre">Pre</h2>

<p>I first heard of Coq in my admiring mathematician,
<a href="https://twitter.com/txyyss">@txyyss</a>’s tweets. At the time I saw him talked
that he’s glad and immersed in re-proving all the theorems he had learned.
He also said, as deepening in Coq, he found a boost on other related
academic aspects. Driven by curiosity, I went to know about what a heck Coq
is. Then I saw it describe itself as a ‘Proof Assistant’. I felt something
uneven about it. Looking through all the programming languages I had
learned, even those as logically abstract as Prolog, were not capable to do a
proof.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/a-brief-journal-about-learning-coq/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/digging-in-a-dream/">夢魘</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-29T05:45:29-05:00" pubdate data-updated="true">Jun 29<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>晚上，我在墳地挖土，點上火炬。 <br />
頭頂的火光把周圍照得通明。   </p>

<p>我抓著幻想中的水平懸絲，  <br />
在各式燒給他們的物件中跳躍。   </p>

<p>到白天，這裡卻成了一座鬼城。   <br />
四處盡是餐館酒店，一片繁華。   </p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/digging-in-a-dream/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/setting-up-ip-over-icmp-with-hans/">Setting Up IP Over ICMP With Hans</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-02T10:19:29-05:00" pubdate data-updated="true">Jun 2<span>nd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="background">Background</h2>
<p>The ISP, China Telecom, interrupted the internet access from my home
yesterday due to the expiration of annually subscription of the
internet service. While I found that ICMP packets are not blocked.
Even though I can’t even do a DNS query, I can ping any server as usual.</p>

<p>The inaccessibility of internet has greatly evoked my anxiety on
seeking changes. Well, it’s theoretically possible to carry data in
ICMP packets. Therefore, according to the hacker community’s
principle, there should already been hackers who made use of this and
opened the sources of their programs.</p>

<p>Indeed, searching ‘ICMP tunneling’, I found
<a href="http://code.gerade.org/hans/">hans</a> and
<a href="http://thomer.com/icmptx/">icmptx</a>. The latter one is more
primitive and complicated to use. After several trials and failures, I
decide to give <strong>icmptx</strong> up, and try <strong>hans</strong> instead.</p>

<p>This article is a tutorial/note about how to establish normal internet
connection in the condition that only ICMP packets are allowed to pass
through the firewall with <strong>hans</strong>.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/setting-up-ip-over-icmp-with-hans/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/experience-with-kde-gci/">Experience About Contributing KDE Projects</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-31T17:55:00-06:00" pubdate data-updated="true">Dec 31<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It’s the first time I am involved in contributing KDE, and I think
that’s very wonderful experience for me.</p>

<p>The first task I claimed is convert the all class members in
calligra/kexi project to d-pointers. This task is not very hard to me
actually. Because that the source files and classes are so many, it
takes most of labors, and some experiences and ability to to cope with
exceptions. I’ve been leaving c++ for almost one year time, so totally
the most important thing I gained is to pick up c++ again. Further
more, I don’t used to know to use d-pointers to reduce coupling, and now I
learnt it, which is really cool.</p>

<p>Then I’ve contributed with marble-globe task. The task is about adding
remote icon/image support for marble. I got known about the typical
structure of a KDE programs, and I’m feeling like to program Qt, which
is really powerful and handy. And then by the passion, I wrote the
required KML tag writers for marble, too. These are interesting for
me.</p>

<p>Totally speaking the greatest gain is the achievement of contributing
open source projects. This is biggest open source project I’ve been
involved in, since before I used to just collaborate opensource
project with small groups or individuals on github before. Those
hackers I met are really friendly. I’m very careless. I made a lot of
mistakes, and even didn’t realize that. At those times, my mentor
always explained to me patiently &amp; gently, that made feel embarrassed
when finally I knew that’s my fault. And at the time, when I met
project-related problems that I can’t solve and not able to be
abstracted to ask on stackoverflow, I sent emails to my mentors and
they explained the reason of the problem clearly and gave me guidance
to solve it. I can feel that the hackers in open source community are
glad to help those beginners like me, and that’s really impressive for
me.</p>

<p>This is the first time &amp; will be the last that I could attend Google
Code-In, but I will continue work on contributing open source
projects. I love the atmosphere in open source communities and  I
would like to get acquainted to more hackers. Good luck.</p>

<p>That’s it, thanks to all.</p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/browse/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/backwards-state-or-the-power-of-laziness/">翻譯：逆向狀態，又：惰性之力</a>
      </li>
    
      <li class="post">
        <a href="/blog/the-abyss/">深淵</a>
      </li>
    
      <li class="post">
        <a href="/blog/how-lazy-evaluation-works-in-haskell/">翻譯：Haskell 怎麼實現惰性求值</a>
      </li>
    
      <li class="post">
        <a href="/blog/function-calling-syntax/">Function Calling Syntax</a>
      </li>
    
      <li class="post">
        <a href="/blog/how-to-be-happy/">翻譯：如何幸福起來</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/shouya">@shouya</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'shouya',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/shouyatf@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015
- Shou Ya
- <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'shousorigin';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
